<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Huaji Script: A Simple Modern Language Interpreter</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Huaji Script:<span class="mywbr"> &nbsp;</span> A Simple Modern Language Interpreter</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._basics%29" class="tocviewlink" data-pltdoc="x">Basics</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._function%29" class="tocviewlink" data-pltdoc="x">Functions</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._data-struct%29" class="tocviewlink" data-pltdoc="x">Built-<wbr></wbr>in Data Structures</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._oop-scope%29" class="tocviewlink" data-pltdoc="x">OOP and Scope</a></td></tr><tr><td align="right"></td><td><a href="#%28part._doc-index%29" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Huaji_.Script__.A_.Simple_.Modern_.Language_.Interpreter%29" class="tocsubseclink" data-pltdoc="x">Huaji Script:<span class="mywbr"> &nbsp;</span> A Simple Modern Language Interpreter</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._basics%29" class="tocsubseclink" data-pltdoc="x">Basics</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._declare%29" class="tocsubseclink" data-pltdoc="x">declare<span class="RktVar">    command</span></a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._mutate%29" class="tocsubseclink" data-pltdoc="x">mutate<span class="RktVar">    command</span></a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._print%29" class="tocsubseclink" data-pltdoc="x">print<span class="RktVar">    command</span></a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._if%29" class="tocsubseclink" data-pltdoc="x">if<span class="RktVar">    command</span></a></td></tr><tr><td><span class="tocsublinknumber">1.5<tt>&nbsp;</tt></span><a href="#%28part._elif%29" class="tocsubseclink" data-pltdoc="x">elif<span class="RktVar">    command</span></a></td></tr><tr><td><span class="tocsublinknumber">1.6<tt>&nbsp;</tt></span><a href="#%28part._else%29" class="tocsubseclink" data-pltdoc="x">else<span class="RktVar">    command</span></a></td></tr><tr><td><span class="tocsublinknumber">1.7<tt>&nbsp;</tt></span><a href="#%28part._while%29" class="tocsubseclink" data-pltdoc="x">while<span class="RktVar">    command</span></a></td></tr><tr><td><span class="tocsublinknumber">1.8<tt>&nbsp;</tt></span><a href="#%28part._exec%29" class="tocsubseclink" data-pltdoc="x">exec<span class="RktVar">    command</span></a></td></tr><tr><td><span class="tocsublinknumber">1.9<tt>&nbsp;</tt></span><a href="#%28part._arithemetic._operators%29" class="tocsubseclink" data-pltdoc="x">Arithemetic Operators<span class="RktVar">    func</span></a></td></tr><tr><td><span class="tocsublinknumber">1.10<tt>&nbsp;</tt></span><a href="#%28part._order._relation%29" class="tocsubseclink" data-pltdoc="x">Order Relations<span class="RktVar">    func</span></a></td></tr><tr><td><span class="tocsublinknumber">1.11<tt>&nbsp;</tt></span><a href="#%28part._resolve%29" class="tocsubseclink" data-pltdoc="x">resolve<span class="RktVar">  func</span></a></td></tr><tr><td><span class="tocsublinknumber">1.12<tt>&nbsp;</tt></span><a href="#%28part._comments%29" class="tocsubseclink" data-pltdoc="x">Comments</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._function%29" class="tocsubseclink" data-pltdoc="x">Functions</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._define%29" class="tocsubseclink" data-pltdoc="x">define<span class="RktVar">    command</span></a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._return%29" class="tocsubseclink" data-pltdoc="x">return<span class="RktVar">    command</span></a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._lazy%29" class="tocsubseclink" data-pltdoc="x">lazy<span class="RktVar">    func</span></a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#%28part._lambda%29" class="tocsubseclink" data-pltdoc="x">lambda<span class="RktVar">    func</span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._data-struct%29" class="tocsubseclink" data-pltdoc="x">Built-<wbr></wbr>in Data Structures</a></td></tr><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._slice%29" class="tocsubseclink" data-pltdoc="x">slice<span class="RktVar">     syntax sugar</span></a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._string%29" class="tocsubseclink" data-pltdoc="x">String</a></td></tr><tr><td><span class="tocsublinknumber">3.2.1<tt>&nbsp;</tt></span><a href="#%28part._strapp%29" class="tocsubseclink" data-pltdoc="x">strapp<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.2.2<tt>&nbsp;</tt></span><a href="#%28part._strlen%29" class="tocsubseclink" data-pltdoc="x">strlen<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.2.3<tt>&nbsp;</tt></span><a href="#%28part._slice~3astring%29" class="tocsubseclink" data-pltdoc="x">slice:<span class="mywbr"> &nbsp;</span>string<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._list%29" class="tocsubseclink" data-pltdoc="x">List</a></td></tr><tr><td><span class="tocsublinknumber">3.3.1<tt>&nbsp;</tt></span><a href="#%28part._list-construction%29" class="tocsubseclink" data-pltdoc="x">List Construction<span class="RktVar">     syntax sugar</span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.2<tt>&nbsp;</tt></span><a href="#%28part._list-func%29" class="tocsubseclink" data-pltdoc="x">list<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.3<tt>&nbsp;</tt></span><a href="#%28part._first%29" class="tocsubseclink" data-pltdoc="x">first<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.4<tt>&nbsp;</tt></span><a href="#%28part._rest%29" class="tocsubseclink" data-pltdoc="x">rest<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.5<tt>&nbsp;</tt></span><a href="#%28part._cons%29" class="tocsubseclink" data-pltdoc="x">cons<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.6<tt>&nbsp;</tt></span><a href="#%28part._append%29" class="tocsubseclink" data-pltdoc="x">append<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#%28part._array-title%29" class="tocsubseclink" data-pltdoc="x">Array</a></td></tr><tr><td><span class="tocsublinknumber">3.4.1<tt>&nbsp;</tt></span><a href="#%28part._array-new%29" class="tocsubseclink" data-pltdoc="x">array-<wbr></wbr>new<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.4.2<tt>&nbsp;</tt></span><a href="#%28part._array-size%29" class="tocsubseclink" data-pltdoc="x">array-<wbr></wbr>size<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.4.3<tt>&nbsp;</tt></span><a href="#%28part._array-ref%29" class="tocsubseclink" data-pltdoc="x">array-<wbr></wbr>ref<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">3.4.4<tt>&nbsp;</tt></span><a href="#%28part._array%29" class="tocsubseclink" data-pltdoc="x">array<span class="RktVar">     command</span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._oop-scope%29" class="tocsubseclink" data-pltdoc="x">OOP and Scope</a></td></tr><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#%28part._init-command%29" class="tocsubseclink" data-pltdoc="x">init<span class="RktVar">     command</span></a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#%28part._init-object%29" class="tocsubseclink" data-pltdoc="x">init<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber">4.3<tt>&nbsp;</tt></span><a href="#%28part._at%29" class="tocsubseclink" data-pltdoc="x">@</a></td></tr><tr><td><span class="tocsublinknumber">4.4<tt>&nbsp;</tt></span><a href="#%28part._mem-ref%29" class="tocsubseclink" data-pltdoc="x">mem-<wbr></wbr>ref<span class="RktVar">     func</span></a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._doc-index%29" class="tocsubseclink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">6.9</span></div><h2><a name="(part._.Huaji_.Script__.A_.Simple_.Modern_.Language_.Interpreter)"></a>Huaji Script: A Simple Modern Language Interpreter</h2><p>by Shuangyi Tong &lt;<a href="mailto:s9tong@uwaterloo.ca">s9tong@uwaterloo.ca</a>&gt;</p><p>Huaji script language is designed to be an extremely simple, customizable, and flexible modern language interpreter based on C++.</p><p><span style="font-weight: bold">Motivation</span>: I wrote its primitive version to support my LAMSTAR network&rsquo;s
(An other project you can found under my <a href="https://github.com/ShuangyiTong/LAMSTAR">repository</a>) training logic.
If you have some C/C++ program and want to control those function calls, you can use tools provided by famous language interpreters like ctypes in Python,
which obviously most people will choose this way.
Or you can use a simple interpreter and compile the interpreter with your program, and this is what this language interpreter is for!</p><p><span style="font-weight: bold">Features</span>: I think this language interpreter is not aesthetically beautiful by any means.
It&rsquo;s a toy created by a second-year undergraduate student who is not in CS major in two months.
But for myself, I was enjoyed in writing an interpreter solely designed by myself.
Some features listed here are not developed intentionally,
but bascially they all contributed to simpler implementations (at least for now).</p><ul><li><p>Everything is a string, even internally</p><p>I was working with Tcl everyday because of my job when I started writing this interpreter.
Tcl says eveything is represented by string in Tcl, and I take this idea.
The different thing is, internally, values in Tcl might not be a string, but Huaji script is.
All values are represented by <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::string</span><span class="hspace"></span></span>. There are indeed problems with this kind of implementation.</p></li><li><p>ASTs are generated dynamically</p><p>There is no independent parsing function, which generates an entire AST for execution. ASTs are generated dynamically.
This makes Huaji script slow, but users get full control over command syntax. <span class="RktInBG"><span class="hspace"></span><span class="RktIn">hjbase::HUAJISCRIPTBASE</span><span class="hspace"></span></span>
are designed to be inherited, that&rsquo;s how users can combine their program with Huaji script interpreter.</p></li><li><p>OOP</p><p>OOP features in Huaji script are very primitive. Compared to other object-oriented languages, OOP in Huaji script is just a little extension
on namespace system.</p></li><li><p>Functional Programming</p><p>Huaji script provides some functional programming features, including lazy functions, closures etc.</p></li></ul><p><span style="font-weight: bold">Name Origin</span>: Huaji (Chinese: &#28369;&#31293;) literally means funny in Chinese. It&rsquo;s meaning has changed becuase of a popular sticker on some Chinese forums,
you can go to <a href="https://tieba.baidu.com">&#30334;&#24230;&#36148;&#21543;</a> to find out what exactly the word means.</p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._basics%29" class="toptoclink" data-pltdoc="x">1<span class="hspace">&nbsp;</span>Basics</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._declare%29" class="toclink" data-pltdoc="x">1.1<span class="hspace">&nbsp;</span>declare<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._mutate%29" class="toclink" data-pltdoc="x">1.2<span class="hspace">&nbsp;</span>mutate<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._print%29" class="toclink" data-pltdoc="x">1.3<span class="hspace">&nbsp;</span>print<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._if%29" class="toclink" data-pltdoc="x">1.4<span class="hspace">&nbsp;</span>if<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._elif%29" class="toclink" data-pltdoc="x">1.5<span class="hspace">&nbsp;</span>elif<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._else%29" class="toclink" data-pltdoc="x">1.6<span class="hspace">&nbsp;</span>else<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._while%29" class="toclink" data-pltdoc="x">1.7<span class="hspace">&nbsp;</span>while<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._exec%29" class="toclink" data-pltdoc="x">1.8<span class="hspace">&nbsp;</span>exec<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._arithemetic._operators%29" class="toclink" data-pltdoc="x">1.9<span class="hspace">&nbsp;</span>Arithemetic Operators<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._order._relation%29" class="toclink" data-pltdoc="x">1.10<span class="hspace">&nbsp;</span>Order Relations<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._resolve%29" class="toclink" data-pltdoc="x">1.11<span class="hspace">&nbsp;</span>resolve<span class="RktVar">  func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._comments%29" class="toclink" data-pltdoc="x">1.12<span class="hspace">&nbsp;</span>Comments</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._function%29" class="toptoclink" data-pltdoc="x">2<span class="hspace">&nbsp;</span>Functions</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._define%29" class="toclink" data-pltdoc="x">2.1<span class="hspace">&nbsp;</span>define<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._return%29" class="toclink" data-pltdoc="x">2.2<span class="hspace">&nbsp;</span>return<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._lazy%29" class="toclink" data-pltdoc="x">2.3<span class="hspace">&nbsp;</span>lazy<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._lambda%29" class="toclink" data-pltdoc="x">2.4<span class="hspace">&nbsp;</span>lambda<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._data-struct%29" class="toptoclink" data-pltdoc="x">3<span class="hspace">&nbsp;</span>Built-in Data Structures</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._slice%29" class="toclink" data-pltdoc="x">3.1<span class="hspace">&nbsp;</span>slice<span class="RktVar">     syntax sugar</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._string%29" class="toclink" data-pltdoc="x">3.2<span class="hspace">&nbsp;</span>String</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._strapp%29" class="toclink" data-pltdoc="x">3.2.1<span class="hspace">&nbsp;</span>strapp<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._strlen%29" class="toclink" data-pltdoc="x">3.2.2<span class="hspace">&nbsp;</span>strlen<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._slice~3astring%29" class="toclink" data-pltdoc="x">3.2.3<span class="hspace">&nbsp;</span>slice:string<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._list%29" class="toclink" data-pltdoc="x">3.3<span class="hspace">&nbsp;</span>List</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._list-construction%29" class="toclink" data-pltdoc="x">3.3.1<span class="hspace">&nbsp;</span>List Construction<span class="RktVar">     syntax sugar</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._list-func%29" class="toclink" data-pltdoc="x">3.3.2<span class="hspace">&nbsp;</span>list<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._first%29" class="toclink" data-pltdoc="x">3.3.3<span class="hspace">&nbsp;</span>first<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._rest%29" class="toclink" data-pltdoc="x">3.3.4<span class="hspace">&nbsp;</span>rest<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._cons%29" class="toclink" data-pltdoc="x">3.3.5<span class="hspace">&nbsp;</span>cons<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._append%29" class="toclink" data-pltdoc="x">3.3.6<span class="hspace">&nbsp;</span>append<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._array-title%29" class="toclink" data-pltdoc="x">3.4<span class="hspace">&nbsp;</span>Array</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._array-new%29" class="toclink" data-pltdoc="x">3.4.1<span class="hspace">&nbsp;</span>array-new<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._array-size%29" class="toclink" data-pltdoc="x">3.4.2<span class="hspace">&nbsp;</span>array-size<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._array-ref%29" class="toclink" data-pltdoc="x">3.4.3<span class="hspace">&nbsp;</span>array-ref<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._array%29" class="toclink" data-pltdoc="x">3.4.4<span class="hspace">&nbsp;</span>array<span class="RktVar">     command</span></a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._oop-scope%29" class="toptoclink" data-pltdoc="x">4<span class="hspace">&nbsp;</span>OOP and Scope</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._init-command%29" class="toclink" data-pltdoc="x">4.1<span class="hspace">&nbsp;</span>init<span class="RktVar">     command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._init-object%29" class="toclink" data-pltdoc="x">4.2<span class="hspace">&nbsp;</span>init<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._at%29" class="toclink" data-pltdoc="x">4.3<span class="hspace">&nbsp;</span>@</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._mem-ref%29" class="toclink" data-pltdoc="x">4.4<span class="hspace">&nbsp;</span>mem-ref<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._doc-index%29" class="toptoclink" data-pltdoc="x">Index</a></p></td></tr></table><h3>1<tt>&nbsp;</tt><a name="(part._basics)"></a>Basics</h3><p>Huaji scripts consisted of commands and are parsed dynamically. Besides <span class="RktVar">command</span>,
another two ast nodes are <span class="RktVar">expr</span> and <span class="RktVar">block</span>.</p><p><span class="RktVar">command</span> = <span class="RktVar">(</span><span class="hspace">&nbsp;</span><span class="stt">...; || ...</span> <span class="RktVar">block )</span></p><p>All <span class="RktVar">command</span>s should end with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">;</span><span class="hspace"></span></span> or <span class="RktVar">block</span>.</p><p><span class="RktVar">block</span> = <span class="hspace">&nbsp;</span><span class="stt">{ ... }</span></p><p>All <span class="RktVar">block</span>s should start with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">{</span><span class="hspace"></span></span> and end with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">}</span><span class="hspace"></span></span>.</p><p><span class="RktVar">expr</span> = <span class="RktVar">(</span><span class="hspace">&nbsp;</span><span class="stt">(</span><span class="RktVar">func</span><span class="stt"> ...) || </span><span class="RktVar">(name</span><span class="stt"> or </span><span class="RktVar">val) )</span></p><p>Expression can start with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span>, and has to end with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span>, or just a <span class="RktVar">name</span> or <span class="RktVar">val</span>.</p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._declare%29" class="toclink" data-pltdoc="x">1.1<span class="hspace">&nbsp;</span>declare<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._mutate%29" class="toclink" data-pltdoc="x">1.2<span class="hspace">&nbsp;</span>mutate<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._print%29" class="toclink" data-pltdoc="x">1.3<span class="hspace">&nbsp;</span>print<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._if%29" class="toclink" data-pltdoc="x">1.4<span class="hspace">&nbsp;</span>if<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._elif%29" class="toclink" data-pltdoc="x">1.5<span class="hspace">&nbsp;</span>elif<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._else%29" class="toclink" data-pltdoc="x">1.6<span class="hspace">&nbsp;</span>else<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._while%29" class="toclink" data-pltdoc="x">1.7<span class="hspace">&nbsp;</span>while<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._exec%29" class="toclink" data-pltdoc="x">1.8<span class="hspace">&nbsp;</span>exec<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._arithemetic._operators%29" class="toclink" data-pltdoc="x">1.9<span class="hspace">&nbsp;</span>Arithemetic Operators<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._order._relation%29" class="toclink" data-pltdoc="x">1.10<span class="hspace">&nbsp;</span>Order Relations<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._resolve%29" class="toclink" data-pltdoc="x">1.11<span class="hspace">&nbsp;</span>resolve<span class="RktVar">  func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._comments%29" class="toclink" data-pltdoc="x">1.12<span class="hspace">&nbsp;</span>Comments</a></p></td></tr></table><h4>1.1<tt>&nbsp;</tt><a name="(part._declare)"></a>declare<span class="RktVar">    command</span></h4><p><span class="stt">declare</span> <span class="RktVar">name</span> <span class="stt">,</span>  <span class="RktVar">name</span> <span class="stt">=</span> <span class="RktVar">expr</span> <span class="stt">, ...;</span></p><p>Declare names, use a comma to separate two names.
If no expr is supplied, the name will be assigned a value of <span class="RktInBG"><span class="hspace"></span><span class="RktIn">#:undefined</span><span class="hspace"></span></span> (e.g. <span class="stt">hjbase::cnt::type_tag::UNDEFINED_TYPE</span>).
Error will be signaled for name already declared.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b=1</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c=</span><span class="RktVal">"value-of-c"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>1.2<tt>&nbsp;</tt><a name="(part._mutate)"></a>mutate<span class="RktVar">    command</span></h4><p><span class="stt">mutate</span> <span class="RktVar">name</span> <span class="stt">to</span> <span class="RktVar">expr</span><span class="stt">;</span></p><p>Mutate value bind to the name, one at a time. If the name has not declared yet, the interpreter will signal error.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">mutate</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">i</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">to</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">i</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>1.3<tt>&nbsp;</tt><a name="(part._print)"></a>print<span class="RktVar">    command</span></h4><p><span class="stt">print</span> <span class="RktVar">flag (name</span> <span class="stt">or</span> <span class="RktVar">expr)</span><span class="stt">;</span></p><p><span class="RktVar">flag</span> = <span class="stt">-</span><span class="stt">-nonl</span> <span class="stt">|| -</span><span class="stt">-expr</span></p><p>Print to console output. <span class="stt">-</span><span class="stt">-nonl</span> disables printing new line character.
If users want to print <span class="RktVar">expr</span>, it has to be led by <span class="stt">-</span><span class="stt">-expr</span> flag.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">file_name=</span><span class="RktVal">"doc/huaji/index.html"</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">str1=</span><span class="RktVal">"6.9"</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">str2=</span><span class="RktVal">"1.062"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"replacing</span><span class="hspace">&nbsp;</span><span class="RktVal">string</span><span class="hspace">&nbsp;</span><span class="RktVal">\""</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">str1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"\"</span><span class="hspace">&nbsp;</span><span class="RktVal">with</span><span class="hspace">&nbsp;</span><span class="RktVal">\""</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">str2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"\"</span><span class="hspace">&nbsp;</span><span class="RktVal">in</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">file_name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"..."</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">OvO</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&gt;&gt;&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">replacing</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">string</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"6.9"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">with</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"1.062"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">in</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc/huaji/index.html...</span><span class="RktMeta"></span></td></tr></table></blockquote><p>use <span class="RktVar">expr</span></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst6=</span><span class="RktVal">"(</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">\"I</span><span class="hspace">&nbsp;</span><span class="RktVal">have</span><span class="hspace">&nbsp;</span><span class="RktVal">space\"</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3)"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">--e</span>xpr</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">first</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst6</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">OvO</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&gt;&gt;&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">I</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">have</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">space</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>1.4<tt>&nbsp;</tt><a name="(part._if)"></a>if<span class="RktVar">    command</span></h4><p><span class="stt">if</span> <span class="RktVar">expr block</span></p><p>Evaluate <span class="RktVar">expr</span>, return value is considered true except <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0</span><span class="hspace"></span></span>.
If return value is true, execute the <span class="RktVar">block</span>.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"1"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"true"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">OvO</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&gt;&gt;&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">true</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>1.5<tt>&nbsp;</tt><a name="(part._elif)"></a>elif<span class="RktVar">    command</span></h4><p><span class="stt">elif</span> <span class="RktVar">expr block</span></p><p>Same as <span class="stt">if</span> command, but if the closest (last evaluated) <span class="stt">if</span> or <span class="stt">elif</span> condition is true,
this command is skipped.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"0"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"true"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">elif</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"false"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">OvO</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&gt;&gt;&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">false</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>1.6<tt>&nbsp;</tt><a name="(part._else)"></a>else<span class="RktVar">    command</span></h4><p><span class="stt">else</span> <span class="RktVar">block</span></p><p>Same as <span class="stt">elif</span>, but no condition <span class="RktVar">expr</span> required.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"true"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">elif</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"true"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">else</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"false"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">OvO</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&gt;&gt;&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">false</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>1.7<tt>&nbsp;</tt><a name="(part._while)"></a>while<span class="RktVar">    command</span></h4><p><span class="stt">while</span> <span class="RktVar">expr block</span></p><p>Same as <span class="stt">if</span>, but after executing the block, the interpreter will evaluate <span class="RktVar">expr</span> again, until <span class="RktVar">expr</span> evaluates to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0</span><span class="hspace"></span></span>.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x=0</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">while</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1000000</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">mutate</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">to</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"x="</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">OvO</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&gt;&gt;&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x=1000000</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>1.8<tt>&nbsp;</tt><a name="(part._exec)"></a>exec<span class="RktVar">    command</span></h4><p><span class="stt">exec</span> <span class="RktVar">(name</span> <span class="stt">or</span> <span class="RktVar">val)</span><span class="stt">;</span></p><p>Call system shell command, implemented with <span class="stt">system</span> defined in <span class="RktVal">"stdlib.h"</span></p><h4>1.9<tt>&nbsp;</tt><a name="(part._arithemetic._operators)"></a>Arithemetic Operators<span class="RktVar">    func</span></h4><p>When the interpreter applies numerical operations, it first converts strings to numerical values.
If a string has a decimal mark <span class="RktInBG"><span class="hspace"></span><span class="RktIn">.</span><span class="hspace"></span></span>, then the string will be converted to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">double</span><span class="hspace"></span></span>, using <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::stod</span><span class="hspace"></span></span>.
Otherwise, the string will be converted to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">long</span><span class="hspace"></span></span>, using <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::stol</span><span class="hspace"></span></span>.
The result will be converted back to string using <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::to_string</span><span class="hspace"></span></span>.</p><p><span class="stt">(+ </span><span class="RktVar">numerical-val</span><span class="stt"> ...)</span></p><p>Addition</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">123</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">456</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">789</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1386</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">(- </span><span class="RktVar">numerical-val</span><span class="stt"> ...)</span></p><p>Substraction</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">123</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">456</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">789</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">-1122</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">(* </span><span class="RktVar">numerical-val</span><span class="stt"> ...)</span></p><p>Multiplication</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">*</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">123</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">456</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">789</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">44253432</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">(/ </span><span class="RktVar">numerical-val</span><span class="stt"> ...)</span></p><p>Division</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">/</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">123</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">456</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">789.0</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0.000342</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">(mod </span><span class="RktVar">numerical-val</span><span class="stt"> </span><span class="RktVar">numerical-val</span><span class="stt">)</span></p><p>Modulo operation</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">mod</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">44253435</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">456</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>1.10<tt>&nbsp;</tt><a name="(part._order._relation)"></a>Order Relations<span class="RktVar">    func</span></h4><p><span class="stt">(&lt;= </span><span class="RktVar">numerical-val</span><span class="stt"> ...)</span></p><p><span class="stt">(&gt;= </span><span class="RktVar">numerical-val</span><span class="stt"> ...)</span></p><p><span class="stt">(&lt; </span><span class="RktVar">numerical-val</span><span class="stt"> ...)</span></p><p><span class="stt">(&gt; </span><span class="RktVar">numerical-val</span><span class="stt"> ...)</span></p><p>All these relation operators return string <span class="RktInBG"><span class="hspace"></span><span class="RktIn">1</span><span class="hspace"></span></span> if true, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0</span><span class="hspace"></span></span> if false.</p><p><span style="font-style: italic">Examples</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">&gt;=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">44253435</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">456</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">456</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">&lt;=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">123</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">122</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">123</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">122</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">124</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>1.11<tt>&nbsp;</tt><a name="(part._resolve)"></a>resolve<span class="RktVar">  func</span></h4><p><span class="stt">(resolve </span><span class="RktVar">name</span><span class="stt">)</span></p><p>Resolve name.</p><p><span style="font-style: italic">Examples</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a=10</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">resolve</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"a"</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>1.12<tt>&nbsp;</tt><a name="(part._comments)"></a>Comments</h4><p><span class="stt">//</span></p><p>Comment text on this line after this mark.</p><p><span class="stt">/* ... */</span></p><p>Comment all text in this block.</p><p><span style="font-style: italic">Examples</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">//</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">line</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">comments</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">/*</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">block</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">comments</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">*/</span><span class="RktMeta"></span></td></tr></table></blockquote><h3>2<tt>&nbsp;</tt><a name="(part._function)"></a>Functions</h3><p>Functions are first class values in Huaji script. A function is a string with its value as the key, maps to
a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">hjbase::FUNC</span><span class="hspace"></span></span> object pointer. In Huaji script, functions are divided into two types based on with
or without side effects.</p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._define%29" class="toclink" data-pltdoc="x">2.1<span class="hspace">&nbsp;</span>define<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._return%29" class="toclink" data-pltdoc="x">2.2<span class="hspace">&nbsp;</span>return<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._lazy%29" class="toclink" data-pltdoc="x">2.3<span class="hspace">&nbsp;</span>lazy<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._lambda%29" class="toclink" data-pltdoc="x">2.4<span class="hspace">&nbsp;</span>lambda<span class="RktVar">    func</span></a></p></td></tr></table><h4>2.1<tt>&nbsp;</tt><a name="(part._define)"></a>define<span class="RktVar">    command</span></h4><p><span class="stt">define </span><span class="RktVar">flag func-name</span><span class="stt">(</span><span class="RktVar">name</span><span class="stt">, </span><span class="RktVar">name</span><span class="stt">=</span><span class="RktVar">expr</span><span class="stt"> ...) </span><span class="RktVar">block</span></p><p>Defines a function with side effects</p><p><span class="stt">define </span><span class="RktVar">flag</span><span class="stt"> (</span><span class="RktVar">func-name name</span><span class="stt"> ...) &lt;</span><span class="RktVar">env</span><span class="stt">&gt; </span><span class="RktVar">expr</span><span class="stt">;</span></p><p>Defines a function without side effects</p><p><span class="RktVar">flag</span> =  <span class="stt">-</span><span class="stt">-overload</span> <span class="stt">|| -</span><span class="stt">-lazy</span></p><p><span class="stt">-</span><span class="stt">-overload</span> means the function is previously defined, and now it will be overloaded. Internally, if <span class="stt">-</span><span class="stt">-overload</span>
flag is not provided, the interpreter use the same function as in <span class="stt">declare</span> command. Otherwise, the interpreter use the same function
as in <span class="stt">mutate</span> command.</p><p><span class="stt">-</span><span class="stt">-lazy</span> defines the function is lazy.</p><p><span class="RktVar">env</span> = <span class="RktVar">name</span><span class="stt">,</span> <span class="RktVar">name</span><span class="stt">=</span><span class="RktVar">expr</span> <span class="stt">...</span></p><p>Add extra environment variables when the function gets exectued.</p><p><span style="font-style: italic">Examples</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">define</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fact</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fact/r</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">if</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">return</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">return</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">*</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">fact/r</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fact/r</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">fact</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fact</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">120</span><span class="RktMeta"></span></td></tr></table></blockquote><p>General recursion</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">define</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">make-fact/r</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">define</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fact-rr</span><span class="RktPn">(</span><span class="RktSym">fact/r</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cur=1</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n=n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">if</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cur</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">return</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">*</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cur</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">fact/r</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fact/r</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cur</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">return</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">define</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fact-n</span><span class="RktPn">(</span><span class="RktSym">fact/r=fact-rr</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cur=1</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n=n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">if</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cur</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">return</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">*</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cur</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">fact/r</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fact/r</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cur</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">return</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">return</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fact-n</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fact/r5=</span><span class="RktPn">(</span><span class="RktSym">make-fact/r</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">fact/r5</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">120</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr></table></blockquote><p>Returns a function (closure)</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">define</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cons2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">first</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">second</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rest</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cons</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">first</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">second</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rest</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cons2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">`</span><span class="RktPn">(</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Defines a function without side effects</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">define</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">make-adder</span><span class="RktPn">(</span><span class="RktSym">op1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">define</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">adder</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">op2</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&lt;n=op1&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">op2</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">return</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">adder</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">add10</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">make-adder</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">add10</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">12</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Use <span class="RktVar">env</span></p><h4>2.2<tt>&nbsp;</tt><a name="(part._return)"></a>return<span class="RktVar">    command</span></h4><p><span class="stt">return</span> <span class="RktVar">expr</span><span class="stt">;</span></p><p>return a value. <span class="RktVar">expr</span> is required. If not in a function call, the interpreter will exit.</p><h4>2.3<tt>&nbsp;</tt><a name="(part._lazy)"></a>lazy<span class="RktVar">    func</span></h4><p><span class="stt">(lazy </span><span class="RktVar">lazy-val</span><span class="stt">)</span></p><p>When a function is defined as lazy, all its arguments don&rsquo;t get evaluated immediately. Arguments value are changed to keys
map to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">const_itVecStr</span><span class="hspace"></span></span> object pointers. Use <span class="RktVar">lazy</span> will evaluate this key string.</p><p>This is very different from lazy evaluation in other languages, which automatically determines when evaluation is requried for an <span class="RktVar">expr</span>.
Let users specify when an <span class="RktVar">expr</span> needs to be evaluated makes it much easier to implement.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">define</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">--l</span>azy</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">make-lazy</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">expr</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">expr</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">true</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">t</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">f</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lazy</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">true</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">make-lazy</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">make-lazy</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">/</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>2.4<tt>&nbsp;</tt><a name="(part._lambda)"></a>lambda<span class="RktVar">    func</span></h4><p><span class="stt">(lambda </span><span class="RktVar">flag</span><span class="stt"> (</span><span class="RktVar">name</span><span class="stt"> ...) &lt;</span><span class="RktVar">env</span><span class="stt">&gt; </span><span class="RktVar">expr</span><span class="stt">)</span></p><p><span class="RktVar">flag</span> =  <span class="stt">-</span><span class="stt">-lazy</span></p><p><span class="RktVar">env</span> = <span class="RktVar">name</span><span class="stt">,</span> <span class="RktVar">name</span><span class="stt">=</span><span class="RktVar">expr</span> <span class="stt">...</span></p><p><span class="stt">lambda</span> syntax is similar to <span class="stt">define</span> no side effects function, and internally they are the same thing. The only difference is a function
defined with <span class="stt">lambda</span> don&rsquo;t need to bind to a <span class="RktVar">name</span>, so there is no <span class="stt">-</span><span class="stt">-overload</span> flag option.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&lt;x=x&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">&lt;x=x</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y=y&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">strapp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"this</span><span class="hspace">&nbsp;</span><span class="RktVal">is</span><span class="hspace">&nbsp;</span><span class="RktVal">x,</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"this</span><span class="hspace">&nbsp;</span><span class="RktVal">is</span><span class="hspace">&nbsp;</span><span class="RktVal">y,</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktVal">"this</span><span class="hspace">&nbsp;</span><span class="RktVal">is</span><span class="hspace">&nbsp;</span><span class="RktVal">z."</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">this</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">is</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">this</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">is</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">this</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">is</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">z.</span><span class="RktMeta"></span></td></tr></table></blockquote><h3>3<tt>&nbsp;</tt><a name="(part._data-struct)"></a>Built-in Data Structures</h3><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._slice%29" class="toclink" data-pltdoc="x">3.1<span class="hspace">&nbsp;</span>slice<span class="RktVar">     syntax sugar</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._string%29" class="toclink" data-pltdoc="x">3.2<span class="hspace">&nbsp;</span>String</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._strapp%29" class="toclink" data-pltdoc="x">3.2.1<span class="hspace">&nbsp;</span>strapp<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._strlen%29" class="toclink" data-pltdoc="x">3.2.2<span class="hspace">&nbsp;</span>strlen<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._slice~3astring%29" class="toclink" data-pltdoc="x">3.2.3<span class="hspace">&nbsp;</span>slice:string<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._list%29" class="toclink" data-pltdoc="x">3.3<span class="hspace">&nbsp;</span>List</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._list-construction%29" class="toclink" data-pltdoc="x">3.3.1<span class="hspace">&nbsp;</span>List Construction<span class="RktVar">     syntax sugar</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._list-func%29" class="toclink" data-pltdoc="x">3.3.2<span class="hspace">&nbsp;</span>list<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._first%29" class="toclink" data-pltdoc="x">3.3.3<span class="hspace">&nbsp;</span>first<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._rest%29" class="toclink" data-pltdoc="x">3.3.4<span class="hspace">&nbsp;</span>rest<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._cons%29" class="toclink" data-pltdoc="x">3.3.5<span class="hspace">&nbsp;</span>cons<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._append%29" class="toclink" data-pltdoc="x">3.3.6<span class="hspace">&nbsp;</span>append<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._array-title%29" class="toclink" data-pltdoc="x">3.4<span class="hspace">&nbsp;</span>Array</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._array-new%29" class="toclink" data-pltdoc="x">3.4.1<span class="hspace">&nbsp;</span>array-new<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._array-size%29" class="toclink" data-pltdoc="x">3.4.2<span class="hspace">&nbsp;</span>array-size<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._array-ref%29" class="toclink" data-pltdoc="x">3.4.3<span class="hspace">&nbsp;</span>array-ref<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._array%29" class="toclink" data-pltdoc="x">3.4.4<span class="hspace">&nbsp;</span>array<span class="RktVar">     command</span></a></p></td></tr></table><h4>3.1<tt>&nbsp;</tt><a name="(part._slice)"></a>slice<span class="RktVar">     syntax sugar</span></h4><p><span class="RktVar">slice</span> is designed to be a common method to multiple data structures. Huaji script provides a syntax sugar for <span class="RktVar">slice</span> function.</p><p><span class="RktVar">name</span><span class="stt">[</span><span class="RktVar">1st-expr</span><span class="stt">:</span><span class="RktVar">2nd-expr</span><span class="stt"> ...]</span></p><p><span class="stt">=&gt; (slice </span><span class="RktVar">name 1st-expr 2nd-expr</span><span class="stt"> ...)</span></p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">str=</span><span class="RktVal">"123456"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">str</span><span class="RktPn">[</span><span class="RktSym">0:-1</span><span class="RktPn">]</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">123456</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>3.2<tt>&nbsp;</tt><a name="(part._string)"></a>String</h4><p>Strings are the fundemental data type in Huaji script. <span class="RktVar">val</span>s are strings, and they might link to
internal data structure. Huaji script provides built-in basic string functions to help user manipulate strings.</p><h5>3.2.1<tt>&nbsp;</tt><a name="(part._strapp)"></a>strapp<span class="RktVar">     func</span></h5><p><span class="stt">(strapp </span><span class="RktVar">val</span><span class="stt"> ...)</span></p><p><span style="font-style: italic">Examples</span>:</p><p>Append strings.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">strapp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"append</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"strings"</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">append</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">strings</span><span class="RktMeta"></span></td></tr></table></blockquote><h5>3.2.2<tt>&nbsp;</tt><a name="(part._strlen)"></a>strlen<span class="RktVar">     func</span></h5><p><span class="stt">(strlen </span><span class="RktVar">val</span><span class="stt">)</span></p><p>Returns string length.</p><p><span style="font-style: italic">Examples</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">strlen</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"length</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktMeta"></span></td></tr></table></blockquote><h5>3.2.3<tt>&nbsp;</tt><a name="(part._slice~3astring)"></a>slice:string<span class="RktVar">     func</span></h5><p><span class="stt">(slice </span><span class="RktVar">val</span><span class="stt"> </span><span class="RktVar">numerical-val</span><span class="stt">)</span></p><p>Returns <span class="RktVar">numerical-val</span><span style="vertical-align: super; font-size: 80%">th</span> <span class="RktVar">char</span> in the string. Here <span class="RktVar">char</span> means a string with only a single character.
If <span class="RktVar">val</span> is a negative number, then the interpreter counts from back. <span class="stt">-1</span> is the pos of the last <span class="RktVar">char</span> in the string.</p><p><span style="font-style: italic">Examples</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">slice</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"abcde"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">slice</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"abcde"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">-1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">e</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">(slice </span><span class="RktVar">val</span><span class="stt"> </span><span class="RktVar">startpos-val</span><span class="stt"> </span><span class="RktVar">endpos-val</span><span class="stt">)</span></p><p>Returns a substring starts from <span class="RktVar">startpos-val</span>, ends at <span class="RktVar">endpos-val</span>. End point is excluded (e.g. [<span class="RktVar">startpos-val</span>, <span class="RktVar">endpos-val</span>))</p><p><span style="font-style: italic">Examples</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">slice</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"abcdefghijk"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cde</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">slice</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"abcde"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">-1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">abcde</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>3.3<tt>&nbsp;</tt><a name="(part._list)"></a>List</h4><p>Built-in list is just a string, and all functions related to it are string operations. List members are separated by
space. Use quotation mark can group list elements. <span class="RktInBG"><span class="hspace"></span><span class="RktIn">(...)</span><span class="hspace"></span></span> represents sublist. After applying any list functions,
the string gets formatted using <span class="RktInBG"><span class="hspace"></span><span class="RktIn">hjbase::LISTFORMMATER</span><span class="hspace"></span></span>. Applying list functions to all strings that satisfy
list format is valid.</p><p>In <span class="RktInBG"><span class="hspace"></span><span class="RktIn">lib/std</span><span class="hspace"></span></span>, we provide another list implementation using lambda.</p><p>In all examples in this list section, previous executed code has effects on later code.</p><h5>3.3.1<tt>&nbsp;</tt><a name="(part._list-construction)"></a>List Construction<span class="RktVar">     syntax sugar</span></h5><p><span class="stt"></span><span class="stt">&lsquo;</span><span class="stt">(...) =&gt; (...)</span></p><p>Construct a list without substitution or evaluation.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst1=</span><span class="RktSym">`</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktPn">)</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst2=</span><span class="RktSym">`</span><span class="RktPn">(</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">c"</span><span class="RktSym">ab</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">lst1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">lst2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">c"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ab</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">&#8217;(...) =&gt; (list ...)</span></p><p>Apply function <span class="stt">list</span></p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst3=</span><span class="RktSym">'</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktSym">,</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst4=</span><span class="RktSym">'</span><span class="RktPn">(</span><span class="RktVal">"abc123"</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4562</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">*</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4.5</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">strapp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"abc</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"efg"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">lst3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">lst4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">abc123</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4562</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">13.500000</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"abc</span><span class="hspace">&nbsp;</span><span class="RktVal">efg"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><h5>3.3.2<tt>&nbsp;</tt><a name="(part._list-func)"></a>list<span class="RktVar">     func</span></h5><p><span class="stt">(list ...)</span></p><p>Evaluate <span class="stt">...</span>, then construct list.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst5=</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">lst5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><h5>3.3.3<tt>&nbsp;</tt><a name="(part._first)"></a>first<span class="RktVar">     func</span></h5><p><span class="stt">(first </span><span class="RktVar">list-val</span><span class="stt"> ...)</span></p><p>Returns the first element in the list if only one <span class="RktVar">list-val</span> supplied. Returns a list of all first elements in <span class="RktVar">list-val</span>s if more than
one <span class="RktVar">list-val</span>s provided.</p><p><span style="font-style: italic">Examples</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">first</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">first</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst6=</span><span class="RktVal">"(</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">\"I</span><span class="hspace">&nbsp;</span><span class="RktVal">have</span><span class="hspace">&nbsp;</span><span class="RktVal">space\"</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3)"</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">first</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst6</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">abc123</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"I</span><span class="hspace">&nbsp;</span><span class="RktVal">have</span><span class="hspace">&nbsp;</span><span class="RktVal">space"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">lst1, lst2 ...</span>&rsquo;s definition are reused here</p><h5>3.3.4<tt>&nbsp;</tt><a name="(part._rest)"></a>rest<span class="RktVar">     func</span></h5><p><span class="stt">(rest </span><span class="RktVar">list-val</span><span class="stt"> ...)</span></p><p>Returns the rest of the list except the first element. Same as <span class="stt">first</span>, can return a list of rest lists if more than one <span class="RktVar">list-val</span>s supplied.</p><p><span style="font-style: italic">Examples</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">rest</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst5</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rest</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst6</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rest</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst6</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">c"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ab</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">4562</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">13.500000</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"abc</span><span class="hspace">&nbsp;</span><span class="RktVal">efg"</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><h5>3.3.5<tt>&nbsp;</tt><a name="(part._cons)"></a>cons<span class="RktVar">     func</span></h5><p><span class="stt">(cons </span><span class="RktVar">val list-val</span><span class="stt">)</span></p><p>Add one element to the front of the list.</p><p><span style="font-style: italic">Examples</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">cons</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">10</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"</span><span class="hspace">&nbsp;</span><span class="RktVal">I</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">have</span><span class="hspace">&nbsp;</span><span class="RktVal">spaces</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst6</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">"</span><span class="hspace">&nbsp;</span><span class="RktVal">I</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">have</span><span class="hspace">&nbsp;</span><span class="RktVal">spaces</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"I</span><span class="hspace">&nbsp;</span><span class="RktVal">have</span><span class="hspace">&nbsp;</span><span class="RktVal">space"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst2</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">c"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ab</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><h5>3.3.6<tt>&nbsp;</tt><a name="(part._append)"></a>append<span class="RktVar">     func</span></h5><p><span class="stt">(append </span><span class="RktVar">list-val ...</span><span class="stt">)</span></p><p>Append lists.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">append</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst6</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">6</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">c"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ab</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">abc123</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4562</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">13.500000</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"abc</span><span class="hspace">&nbsp;</span><span class="RktVal">efg"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"I</span><span class="hspace">&nbsp;</span><span class="RktVal">have</span><span class="hspace">&nbsp;</span><span class="RktVal">space"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><h4>3.4<tt>&nbsp;</tt><a name="(part._array-title)"></a>Array</h4><p>Array is implemented with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::vector&lt;std::string&gt;</span><span class="hspace"></span></span>.</p><p>In all examples in this array section, previous executed code has effects on later code.</p><h5>3.4.1<tt>&nbsp;</tt><a name="(part._array-new)"></a>array-new<span class="RktVar">     func</span></h5><p><span class="stt">(array-new)</span></p><p>Returns a new, empty <span class="RktVar">array-val</span></p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array=</span><span class="RktPn">(</span><span class="RktSym">array-new</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr></table></blockquote><h5>3.4.2<tt>&nbsp;</tt><a name="(part._array-size)"></a>array-size<span class="RktVar">     func</span></h5><p><span class="stt">(array-size </span><span class="RktVar">array-val</span><span class="stt">)</span></p><p>Returns size of <span class="RktVar">array-val</span>.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">array-size</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span></td></tr></table></blockquote><h5>3.4.3<tt>&nbsp;</tt><a name="(part._array-ref)"></a>array-ref<span class="RktVar">     func</span></h5><p><span class="stt">(array-ref </span><span class="RktVar">array-val numerical-val</span><span class="stt">)</span></p><p>Returns <span class="RktVar">numerical-val</span><span style="vertical-align: super; font-size: 80%">th</span> element in <span class="RktVar">array-val</span></p><h5>3.4.4<tt>&nbsp;</tt><a name="(part._array)"></a>array<span class="RktVar">     command</span></h5><p><span class="stt">array push_back </span><span class="RktVar">array-expr</span><span class="stt"> </span><span class="RktVar">elem-expr</span><span class="stt">;</span></p><p>Push one element at the back of <span class="RktVar">array-val</span> evaluated from the first <span class="RktVar">array-expr</span>, implemented with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::vector::push_back</span><span class="hspace"></span></span>.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">push_back</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">array-ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">array insert </span><span class="RktVar">array-expr</span><span class="stt"> </span><span class="RktVar">pos-expr</span><span class="stt"> </span><span class="RktVar">elem-expr</span><span class="stt">;</span></p><p>Insert one element in front of <span class="RktVar">pos</span>, evaluated from <span class="RktVar">pos-expr</span>, into <span class="RktVar">array-val</span>, evaluated from the first <span class="RktVar">array-expr</span>.
Implemented with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::vector::insert</span><span class="hspace"></span></span>.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">insert</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">array-ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">array mutate  </span><span class="RktVar">array-expr</span><span class="stt"> </span><span class="RktVar">pos-expr</span><span class="stt"> </span><span class="RktVar">elem-expr</span><span class="stt">;</span></p><p>Mutate value stored at <span class="RktVar">pos</span> in <span class="RktVar">array-val</span> to <span class="RktVar">val</span>, evaluated from <span class="RktVar">elem-expr</span>.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">mutate</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">array-ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">array erase </span><span class="RktVar">array-expr</span><span class="stt"> </span><span class="RktVar">pos-expr</span><span class="stt">;</span></p><p>Erase <span class="RktVar">pos</span><span style="vertical-align: super; font-size: 80%">th</span> element in <span class="RktVar">array-val</span>, evaluated from the first <span class="RktVar">array-expr</span>.
Implemented with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::vector::erase</span><span class="hspace"></span></span>.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">erase</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">array-ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="stt">array pop_back </span><span class="RktVar">array-expr</span><span class="stt">;</span></p><p>Pop last element out. Implemented with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::vector::pop_back</span><span class="hspace"></span></span>.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">array-size</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">array</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pop_back</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">array-size</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">test-array</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span></td></tr></table></blockquote><h3>4<tt>&nbsp;</tt><a name="(part._oop-scope)"></a>OOP and Scope</h3><p>Huaji script provides extended support on namespace system to approximate OOP features. A namespace does not bind to
any name in any variables scope, <span class="RktVar">namespace-name</span> can be accessed anywhere in the script after it initialized.
An object uses the same implementation as namespace <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::map&lt;std::string, std::string&gt;</span><span class="hspace"></span></span>, but is a
first-class value, and can be deleted. In Huaji script, there is no class, object are created using copy constructor on namespace.</p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._init-command%29" class="toclink" data-pltdoc="x">4.1<span class="hspace">&nbsp;</span>init<span class="RktVar">     command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._init-object%29" class="toclink" data-pltdoc="x">4.2<span class="hspace">&nbsp;</span>init<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._at%29" class="toclink" data-pltdoc="x">4.3<span class="hspace">&nbsp;</span>@</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._mem-ref%29" class="toclink" data-pltdoc="x">4.4<span class="hspace">&nbsp;</span>mem-ref<span class="RktVar">     func</span></a></p></td></tr></table><h4>4.1<tt>&nbsp;</tt><a name="(part._init-command)"></a>init<span class="RktVar">     command</span></h4><p><span class="stt">init </span><span class="RktVar">namespace-name</span><span class="stt">;</span></p><p>Create an empty namespace with the name <span class="RktVar">namespace-name</span>.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">init</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Vec2</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Initialize a namespace called <span class="stt">Vec2</span>.</p><p><span class="stt">init </span><span class="RktVar">child-namespace-name parent-namespace</span><span class="stt">;</span></p><p>Use copy contructor <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::map::map</span><span class="hspace"></span></span> on <span class="RktVar">parent-namespace</span> to create a new namespace, and bind it to <span class="RktVar">child-namespace-name</span></p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">init</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">2D-pos</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Vec2</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Initialize a namespace called <span class="stt">2D-pos</span> copied from <span class="stt">Vec2</span>. <span class="stt">Vec2</span> is empty, so <span class="stt">2D-pos</span> is empty too.</p><h4>4.2<tt>&nbsp;</tt><a name="(part._init-object)"></a>init<span class="RktVar">     func</span></h4><p><span class="stt">(init </span><span class="RktVar">namespace-name</span><span class="stt">)</span></p><p>Return an object constructed by applying copy constructor on <span class="RktVar">namespace-name</span>. It is identical internally,
but an object is a first-class value.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pointA</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">init</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Vec2"</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Notice here <span class="stt">Vec2</span> is in quotation mark, because it is neither a <span class="RktVar">name</span> nor a <span class="RktVar">val</span>. Using quotation marks
make it a <span class="RktVar">val</span>.</p><h4>4.3<tt>&nbsp;</tt><a name="(part._at)"></a>@</h4><p><span class="RktVar">name-in-namespace</span><span class="stt">@</span><span class="RktVar">namespace-name</span></p><p>Separator for accessing variables in a namespace.</p><h4>4.4<tt>&nbsp;</tt><a name="(part._mem-ref)"></a>mem-ref<span class="RktVar">     func</span></h4><p><span class="stt">(men-ref </span><span class="RktVar">name-in-object-scope</span><span class="stt"> </span><span class="RktVar">object-name</span><span class="stt">)</span></p><p>Get the <span class="RktVar">val</span> bind to the <span class="RktVar">name-in-object-scope</span>.</p><p><span style="font-style: italic">Example</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">init</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">constant</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pi@constant</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3.14</span><span class="RktSym">,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">e@constant</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2.7</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">declare</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cnt_obj</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">init</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"constant"</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">e@constant</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2.7</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">mem-ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"pi"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cnt_obj</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3.14</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Notice here we have to use quotation mark agains, because "mem-ref" arguments get evaluated first, and it&rsquo;s not in the scope.</p><h3><a name="(part._doc-index)"></a>Index</h3><table cellspacing="0" cellpadding="0"><tr><td><p><a href="#alpha:A">A</a> <a href="#alpha:B">B</a> <a href="#alpha:C">C</a> <a href="#alpha:D">D</a> <a href="#alpha:E">E</a> <a href="#alpha:F">F</a> <span class="nonavigation">G</span> <a href="#alpha:H">H</a> <a href="#alpha:I">I</a> <span class="nonavigation">J</span> <span class="nonavigation">K</span> <a href="#alpha:L">L</a> <a href="#alpha:M">M</a> <span class="nonavigation">N</span> <a href="#alpha:O">O</a> <a href="#alpha:P">P</a> <span class="nonavigation">Q</span> <a href="#alpha:R">R</a> <a href="#alpha:S">S</a> <span class="nonavigation">T</span> <span class="nonavigation">U</span> <span class="nonavigation">V</span> <a href="#alpha:W">W</a> <span class="nonavigation">X</span> <span class="nonavigation">Y</span> <span class="nonavigation">Z</span> </p></td></tr><tr><td><p>&nbsp;</p></td></tr><tr><td><p><a href="#%28part._at%29" class="indexlink" data-pltdoc="x">@<br/></a><a name="alpha:A"></a><span><a href="#%28part._append%29" class="indexlink" data-pltdoc="x">append<span class="RktVar">     func</span><br/></a></span><a href="#%28part._arithemetic._operators%29" class="indexlink" data-pltdoc="x">Arithemetic Operators<span class="RktVar">    func</span><br/></a><a href="#%28part._array-title%29" class="indexlink" data-pltdoc="x">Array<br/></a><a href="#%28part._array%29" class="indexlink" data-pltdoc="x">array<span class="RktVar">     command</span><br/></a><a href="#%28part._array-new%29" class="indexlink" data-pltdoc="x">array-new<span class="RktVar">     func</span><br/></a><a href="#%28part._array-ref%29" class="indexlink" data-pltdoc="x">array-ref<span class="RktVar">     func</span><br/></a><a href="#%28part._array-size%29" class="indexlink" data-pltdoc="x">array-size<span class="RktVar">     func</span><br/></a><a name="alpha:B"></a><span><a href="#%28part._basics%29" class="indexlink" data-pltdoc="x">Basics<br/></a></span><a href="#%28part._data-struct%29" class="indexlink" data-pltdoc="x">Built-in Data Structures<br/></a><a name="alpha:C"></a><span><a href="#%28part._comments%29" class="indexlink" data-pltdoc="x">Comments<br/></a></span><a href="#%28part._cons%29" class="indexlink" data-pltdoc="x">cons<span class="RktVar">     func</span><br/></a><a name="alpha:D"></a><span><a href="#%28part._declare%29" class="indexlink" data-pltdoc="x">declare<span class="RktVar">    command</span><br/></a></span><a href="#%28part._define%29" class="indexlink" data-pltdoc="x">define<span class="RktVar">    command</span><br/></a><a name="alpha:E"></a><span><a href="#%28part._elif%29" class="indexlink" data-pltdoc="x">elif<span class="RktVar">    command</span><br/></a></span><a href="#%28part._else%29" class="indexlink" data-pltdoc="x">else<span class="RktVar">    command</span><br/></a><a href="#%28part._exec%29" class="indexlink" data-pltdoc="x">exec<span class="RktVar">    command</span><br/></a><a name="alpha:F"></a><span><a href="#%28part._first%29" class="indexlink" data-pltdoc="x">first<span class="RktVar">     func</span><br/></a></span><a href="#%28part._function%29" class="indexlink" data-pltdoc="x">Functions<br/></a><a name="alpha:H"></a><span><a href="" class="indexlink" data-pltdoc="x">Huaji Script: A Simple Modern Language Interpreter<br/></a></span><a name="alpha:I"></a><span><a href="#%28part._if%29" class="indexlink" data-pltdoc="x">if<span class="RktVar">    command</span><br/></a></span><a href="#%28part._init-command%29" class="indexlink" data-pltdoc="x">init<span class="RktVar">     command</span><br/></a><a href="#%28part._init-object%29" class="indexlink" data-pltdoc="x">init<span class="RktVar">     func</span><br/></a><a name="alpha:L"></a><span><a href="#%28part._lambda%29" class="indexlink" data-pltdoc="x">lambda<span class="RktVar">    func</span><br/></a></span><a href="#%28part._lazy%29" class="indexlink" data-pltdoc="x">lazy<span class="RktVar">    func</span><br/></a><a href="#%28part._list%29" class="indexlink" data-pltdoc="x">List<br/></a><a href="#%28part._list-construction%29" class="indexlink" data-pltdoc="x">List Construction<span class="RktVar">     syntax sugar</span><br/></a><a href="#%28part._list-func%29" class="indexlink" data-pltdoc="x">list<span class="RktVar">     func</span><br/></a><a name="alpha:M"></a><span><a href="#%28part._mem-ref%29" class="indexlink" data-pltdoc="x">mem-ref<span class="RktVar">     func</span><br/></a></span><a href="#%28part._mutate%29" class="indexlink" data-pltdoc="x">mutate<span class="RktVar">    command</span><br/></a><a name="alpha:O"></a><span><a href="#%28part._oop-scope%29" class="indexlink" data-pltdoc="x">OOP and Scope<br/></a></span><a href="#%28part._order._relation%29" class="indexlink" data-pltdoc="x">Order Relations<span class="RktVar">    func</span><br/></a><a name="alpha:P"></a><span><a href="#%28part._print%29" class="indexlink" data-pltdoc="x">print<span class="RktVar">    command</span><br/></a></span><a name="alpha:R"></a><span><a href="#%28part._resolve%29" class="indexlink" data-pltdoc="x">resolve<span class="RktVar">  func</span><br/></a></span><a href="#%28part._rest%29" class="indexlink" data-pltdoc="x">rest<span class="RktVar">     func</span><br/></a><a href="#%28part._return%29" class="indexlink" data-pltdoc="x">return<span class="RktVar">    command</span><br/></a><a name="alpha:S"></a><span><a href="#%28part._slice%29" class="indexlink" data-pltdoc="x">slice<span class="RktVar">     syntax sugar</span><br/></a></span><a href="#%28part._slice~3astring%29" class="indexlink" data-pltdoc="x">slice:string<span class="RktVar">     func</span><br/></a><a href="#%28part._strapp%29" class="indexlink" data-pltdoc="x">strapp<span class="RktVar">     func</span><br/></a><a href="#%28part._string%29" class="indexlink" data-pltdoc="x">String<br/></a><a href="#%28part._strlen%29" class="indexlink" data-pltdoc="x">strlen<span class="RktVar">     func</span><br/></a><a name="alpha:W"></a><span><a href="#%28part._while%29" class="indexlink" data-pltdoc="x">while<span class="RktVar">    command</span><br/></a></span></p></td></tr></table></div></div><div id="contextindicator">&nbsp;</div></body></html>