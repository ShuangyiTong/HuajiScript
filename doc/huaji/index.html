<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Huaji Script: A Simple Modern Language Interpreter</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Huaji Script:<span class="mywbr"> &nbsp;</span> A Simple Modern Language Interpreter</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="basics.html" class="tocviewlink" data-pltdoc="x">Basics</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="function.html" class="tocviewlink" data-pltdoc="x">Functions</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="data-struct.html" class="tocviewlink" data-pltdoc="x">Built-<wbr></wbr>in Data Structures</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="oop-scope.html" class="tocviewlink" data-pltdoc="x">OOP and Scope</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Huaji_.Script__.A_.Simple_.Modern_.Language_.Interpreter%29" class="tocsubseclink" data-pltdoc="x">Huaji Script:<span class="mywbr"> &nbsp;</span> A Simple Modern Language Interpreter</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">1.062</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<span class="nonavigation">up</span>&nbsp;&nbsp;<a href="basics.html" title="forward to &quot;1 Basics&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h2><a name="(part._.Huaji_.Script__.A_.Simple_.Modern_.Language_.Interpreter)"></a>Huaji Script: A Simple Modern Language Interpreter</h2><p>by Shuangyi Tong &lt;<a href="mailto:s9tong@uwaterloo.ca">s9tong@uwaterloo.ca</a>&gt;</p><p>Huaji script language is designed to be an extremely simple, customizable, and flexible modern language interpreter based on C++.</p><p><span style="font-weight: bold">Motivation</span>: I wrote its primitive version to support my LAMSTAR network&rsquo;s
(An other project you can found under my <a href="https://github.com/ShuangyiTong/LAMSTAR">repository</a>) training logic.
If you have some C/C++ program and want to control those function calls, you can use tools provided by famous language interpreters like ctypes in Python,
which obviously most people will choose this way.
Or you can use a simple interpreter and compile the interpreter with your program, and this is what this language interpreter is for!</p><p><span style="font-weight: bold">Features</span>: I think this language interpreter is not aesthetically beautiful by any means.
It&rsquo;s a toy created by a second-year undergraduate student who is not in CS major in two months.
But for myself, I was enjoyed in writing an interpreter solely designed by myself.
Some features listed here are not developed intentionally,
but bascially they all contributed to simpler implementations (at least for now).</p><ul><li><p>Everything is a string, even internally</p><p>I was working with Tcl everyday because of my job when I started writing this interpreter.
Tcl says eveything is represented by string in Tcl, and I take this idea.
The different thing is, internally, values in Tcl might not be a string, but Huaji script is.
All values are represented by <span class="RktInBG"><span class="hspace"></span><span class="RktIn">std::string</span><span class="hspace"></span></span>. There are indeed problems with this kind of implementation.</p></li><li><p>ASTs are generated dynamically</p><p>There is no independent parsing function, which generates an entire AST for execution. ASTs are generated dynamically.
This makes Huaji script slow, but users get full control over command syntax. <span class="RktInBG"><span class="hspace"></span><span class="RktIn">hjbase::HUAJISCRIPTBASE</span><span class="hspace"></span></span>
are designed to be inherited, that&rsquo;s how users can combine their program with Huaji script interpreter.</p></li><li><p>OOP</p><p>OOP features in Huaji script are very primitive. Compared to other object-oriented languages, OOP in Huaji script is just a little extension
on namespace system.</p></li><li><p>Functional Programming</p><p>Huaji script provides some functional programming features, including lazy functions, closures etc.</p></li></ul><p><span style="font-weight: bold">Name Origin</span>: Huaji (Chinese: &#28369;&#31293;) literally means funny in Chinese. It&rsquo;s meaning has changed becuase of a popular sticker on some Chinese forums,
you can go to <a href="https://tieba.baidu.com">&#30334;&#24230;&#36148;&#21543;</a> to find out what exactly the word means.</p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html" class="toptoclink" data-pltdoc="x">1<span class="hspace">&nbsp;</span>Basics</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._declare%29" class="toclink" data-pltdoc="x">1.1<span class="hspace">&nbsp;</span>declare<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._mutate%29" class="toclink" data-pltdoc="x">1.2<span class="hspace">&nbsp;</span>mutate<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._print%29" class="toclink" data-pltdoc="x">1.3<span class="hspace">&nbsp;</span>print<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._if%29" class="toclink" data-pltdoc="x">1.4<span class="hspace">&nbsp;</span>if<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._elif%29" class="toclink" data-pltdoc="x">1.5<span class="hspace">&nbsp;</span>elif<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._else%29" class="toclink" data-pltdoc="x">1.6<span class="hspace">&nbsp;</span>else<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._while%29" class="toclink" data-pltdoc="x">1.7<span class="hspace">&nbsp;</span>while<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._exec%29" class="toclink" data-pltdoc="x">1.8<span class="hspace">&nbsp;</span>exec<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._arithemetic._operators%29" class="toclink" data-pltdoc="x">1.9<span class="hspace">&nbsp;</span>Arithemetic Operators<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._order._relation%29" class="toclink" data-pltdoc="x">1.10<span class="hspace">&nbsp;</span>Order Relations<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._resolve%29" class="toclink" data-pltdoc="x">1.11<span class="hspace">&nbsp;</span>resolve<span class="RktVar">  func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="basics.html#%28part._comments%29" class="toclink" data-pltdoc="x">1.12<span class="hspace">&nbsp;</span>Comments</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="function.html" class="toptoclink" data-pltdoc="x">2<span class="hspace">&nbsp;</span>Functions</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="function.html#%28part._define%29" class="toclink" data-pltdoc="x">2.1<span class="hspace">&nbsp;</span>define<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="function.html#%28part._return%29" class="toclink" data-pltdoc="x">2.2<span class="hspace">&nbsp;</span>return<span class="RktVar">    command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="function.html#%28part._lazy%29" class="toclink" data-pltdoc="x">2.3<span class="hspace">&nbsp;</span>lazy<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="function.html#%28part._lambda%29" class="toclink" data-pltdoc="x">2.4<span class="hspace">&nbsp;</span>lambda<span class="RktVar">    func</span></a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html" class="toptoclink" data-pltdoc="x">3<span class="hspace">&nbsp;</span>Built-in Data Structures</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._slice%29" class="toclink" data-pltdoc="x">3.1<span class="hspace">&nbsp;</span>slice<span class="RktVar">     syntax sugar</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._string%29" class="toclink" data-pltdoc="x">3.2<span class="hspace">&nbsp;</span>String</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._strapp%29" class="toclink" data-pltdoc="x">3.2.1<span class="hspace">&nbsp;</span>strapp<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._strlen%29" class="toclink" data-pltdoc="x">3.2.2<span class="hspace">&nbsp;</span>strlen<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._slice~3astring%29" class="toclink" data-pltdoc="x">3.2.3<span class="hspace">&nbsp;</span>slice:string<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._list%29" class="toclink" data-pltdoc="x">3.3<span class="hspace">&nbsp;</span>List</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._list-construction%29" class="toclink" data-pltdoc="x">3.3.1<span class="hspace">&nbsp;</span>List Construction<span class="RktVar">     syntax sugar</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._list-func%29" class="toclink" data-pltdoc="x">3.3.2<span class="hspace">&nbsp;</span>list<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._first%29" class="toclink" data-pltdoc="x">3.3.3<span class="hspace">&nbsp;</span>first<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._rest%29" class="toclink" data-pltdoc="x">3.3.4<span class="hspace">&nbsp;</span>rest<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._cons%29" class="toclink" data-pltdoc="x">3.3.5<span class="hspace">&nbsp;</span>cons<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._append%29" class="toclink" data-pltdoc="x">3.3.6<span class="hspace">&nbsp;</span>append<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._array-title%29" class="toclink" data-pltdoc="x">3.4<span class="hspace">&nbsp;</span>Array</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._array-new%29" class="toclink" data-pltdoc="x">3.4.1<span class="hspace">&nbsp;</span>array-new<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._array-size%29" class="toclink" data-pltdoc="x">3.4.2<span class="hspace">&nbsp;</span>array-size<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._array-ref%29" class="toclink" data-pltdoc="x">3.4.3<span class="hspace">&nbsp;</span>array-ref<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="data-struct.html#%28part._array%29" class="toclink" data-pltdoc="x">3.4.4<span class="hspace">&nbsp;</span>array<span class="RktVar">     command</span></a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="oop-scope.html" class="toptoclink" data-pltdoc="x">4<span class="hspace">&nbsp;</span>OOP and Scope</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="oop-scope.html#%28part._init-command%29" class="toclink" data-pltdoc="x">4.1<span class="hspace">&nbsp;</span>init<span class="RktVar">     command</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="oop-scope.html#%28part._init-object%29" class="toclink" data-pltdoc="x">4.2<span class="hspace">&nbsp;</span>init<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="oop-scope.html#%28part._at%29" class="toclink" data-pltdoc="x">4.3<span class="hspace">&nbsp;</span>@</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="oop-scope.html#%28part._mem-ref%29" class="toclink" data-pltdoc="x">4.4<span class="hspace">&nbsp;</span>mem-ref<span class="RktVar">     func</span></a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="doc-index.html" class="toptoclink" data-pltdoc="x">Index</a></p></td></tr></table><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<span class="nonavigation">up</span>&nbsp;&nbsp;<a href="basics.html" title="forward to &quot;1 Basics&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>